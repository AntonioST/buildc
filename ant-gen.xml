<?xml version="1.0" encoding="UTF-8"?>
<project>

    <property name="build.dir" value="build"/>

    <macrodef name="add-task">
        <attribute name="src" default="."/>
        <attribute name="name"/>
        <attribute name="class"/>
        <attribute name="classpath" default=""/>
        <sequential>
            <mkdir dir="${build.dir}/gen/@{name}"/>
            <javac srcdir="@{src}"
                   destdir="${build.dir}/gen/@{name}"
                   includes="**/*"
                   listfiles="true"
                   includeantruntime="no"
                   includejavaruntime="no"
                   fork="true"
                   failonerror="true">
                <classpath path="@{classpath}"/>
            </javac>
            <taskdef name="@{name}" classname="@{class}" classpath="${build.dir}/gen/@{name}"/>
        </sequential>
    </macrodef>

    <!--<macrodef name="add-tasks">-->
        <!--<attribute name="src" default="."/>-->
        <!--<attribute name="classpath" default=""/>-->
        <!--<sequential>-->
            <!--<mkdir dir="${build.dir}/gen/@{src}"/>-->
            <!--<mkdir dir="${build.dir}/gen/@{src}/classes"/>-->
            <!--<javac srcdir="@{src}"-->
                   <!--destdir="${build.dir}/gen/@{src}/classes"-->
                   <!--includes="**/*"-->
                   <!--listfiles="true"-->
                   <!--includeantruntime="no"-->
                   <!--includejavaruntime="no"-->
                   <!--fork="true"-->
                   <!--failonerror="true">-->
                <!--<classpath path="@{classpath}"/>-->
            <!--</javac>-->
        <!--</sequential>-->
    <!--</macrodef>-->
</project>