digraph java_publish {
    rankdir="RL";
    //init
    "init" [shape=box];
    //compile
    "compile" [shape=box];
    "compile" -> "init";
    //test
    "test" [shape=box];
    "compile-test" [shape=box];
    "compile-test" -> "compile";
    "test" -> "compile-test";
    //jar
    "jar" [shape=box];
    "jar" -> "compile";
    //publish
    "release" [shape=box,style=filled,color=yellow];
    "release-bin" [shape=box,style=filled,color=yellow];
    "release-src" [shape=box,style=filled,color=yellow];
    "release-doc" [shape=box,style=filled,color=yellow];
    "publish" [shape=box,style=filled,color=yellow];
    "release" -> "release-bin";
    "release" -> "release-src";
    "release" -> "release-doc";
    "release-bin" -> "test";
    "release-bin" -> "jar";
    "release-src" -> "init";
    "release-doc" -> "init";
    "release-doc" -> "javadoc" -> "init";
    "publish" -> "release";
    {rank=same;"init","compile","compile-test"}
    {rank=same;"javadoc","test","jar"}
    {rank=same;"release-bin","release-src","release-doc"}
}