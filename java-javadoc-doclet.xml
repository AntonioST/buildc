<?xml version="1.0" encoding="UTF-8"?>
<project>
    <!--==============
    dependence library
    ==================

    name    : pegdown doclet
    site    : http://mvnrepository.com/artifact/org.pegdown/pegdown
    property 'javadoc.doclet' = 'ch.raffael.doclets.pegdown.PegdownDoclet'

    ===============-->

    <!--===========
    import checking
    ============-->
    <fail unless="define.java">should import 'build-java.xml'</fail>
    <fail unless="build.dir">Must set 'build.dir'</fail>
    <fail unless="src.dir">Must set 'src.dir'</fail>
    <fail if="define.javadoc">'javadoc' has imported</fail>
    <property name="define.javadoc" value=""/>

    <!--=========
    global define
    ==========-->
    <property name="build.javadoc.dir" value="${build.dir}/javadoc"/>

    <!--=================
    Help Document Section
    ==================-->
    <target name="-help-javadoc" extensionOf="-help-extend">
        <echo>javadoc : generate javadoc to ${build.javadoc.dir}</echo>
    </target>

    <!--=======
    task define
    ========-->
    <target name="javadoc" depends="init,init-classpath">
        <!--check-->
        <fail unless="javadoc.doclet">Must set 'javadoc.doclet'</fail>
        <!--default value-->
        <property name="src.include" value="**/*"/>
        <property name="src.exclude" value=""/>
        <property name="javadoc.title" value="${project.name} API"/>
        <property name="javadoc.author" value=""/>
        <property name="javadoc.version" value="${project.version}"/>
        <property name="javadoc.charset" value="UTF-8"/>
        <property name="javadoc.noindex" value="false"/>
        <property name="javadoc.nonavbar" value="false"/>
        <property name="javadoc.notree" value="false"/>
        <property name="javadoc.private" value="false"/>
        <property name="javadoc.splitindex" value="false"/>
        <!--initial-->
        <mkdir dir="${build.javadoc.dir}"/>
        <pathconvert property="javadoc.doclet.path" refid="real.default.classpath"/>
        <!--javadoc-->
        <javadoc destdir="${build.javadoc.dir}"
                 windowtitle="${javadoc.title}"
                 author="${javadoc.author}"
                 version="${javadoc.version}"
                 charset="${javadoc.charset}"
                 noindex="${javadoc.noindex}"
                 nonavbar="${javadoc.nonavbar}"
                 notree="${javadoc.notree}"
                 private="${javadoc.private}"
                 splitindex="${javadoc.splitindex}"
                 failonerror="true">
            <classpath refid="real.default.classpath"/>
            <doclet name="${javadoc.doclet.class}" path="${javadoc.doclet.path}"/>
            <fileset dir="${src.dir}" includes="${src.include}" excludes="${src.exclude}"/>
        </javadoc>
    </target>
</project>